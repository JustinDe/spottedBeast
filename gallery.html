<!DOCTYPE html>
<html>
<head>
    <title>Gallery</title>
    <script type="text/javascript">
        function makeRequest (method, url)
        {
            return new Promise(function(resolve, reject)
            {
                var xhr = new XMLHttpRequest();
                xhr.open(method, url);
                xhr.onload = function()
                {
                  if (this.status >= 200 && this.status < 300)
                  {
                    resolve(xhr.response);
                  }
                  else
                  {
                    reject({
                      status: this.status,
                      statusText: xhr.statusText
                    });
                  }
                };
                xhr.onerror = function()
                {
                  reject({
                    status: this.status,
                    statusText: xhr.statusText
                  });
                };
                xhr.send();
            });
        }
    </script>
</head>
<body>
<script type="text/javascript">
    function buildGallery(gallery)
    {
        for(itm in gallery)
        {
            document.write("<img src='"+gallery[itm]['url']+"'/></br>");
        }
    }


    makeRequest('GET', 'http://localhost:8080/feed').then(function(data)
    {
        buildGallery(JSON.parse(data));
    }).catch(function (err)
    {
        console.error('Augh, there was an error!', err.statusText);
    });
</script>
</body>
</html>